# Node简介

`高性能Web服务器`的两个要点

- 事件驱动
- 非阻塞IO

`为什么是JavaScript`

- 开发门槛低，高性能（V8引擎摘得性能第一的桂冠）
- 历史包袱少
- 广泛的事件驱动方面的应用

`Node的结构和Chrome十分相似`

![浏览器和Node的组件构成](/src/assets/20210118212923.jpg)

## 特点

`异步I/O` 

在Node中，绝大部分的API都是通过异步的方式调用，无需等待，极大的提升效率

`事件与回调`

事件的编程具有轻量级、松耦合、只关注事务点等优势，但多个异步场景如何协同是个问题

`单线程`

Node保留了JavaScript在浏览器中的单线程特点   

优点：
- 不用像多线程那样在意状态的同步问题
- 没有死锁的存在
- 减少了交换线程上下文的性能开销

缺点：
- 无法利用多核CPU
- 错误导致整个应用崩溃退出
- 大量计算占用CPU导致无法继续调用异步I/O

举个🌰：浏览器中JavaScript和UI共用一个线程，JS长时间运行会阻塞UI的渲染   

解决方案：
- 采用和 Web Workers 相同的思路来解决单线程的问题：child_process

## 跨平台

Node在操作系统和上层模块系统之间构建了一层平台层架构，即libuv

![跨平台](/src/assets/20210118215032.jpg)

## 应用场景

`I/O密集型`

Node面向网络且擅长并行I/O，能够有效的组织更多硬件资源，主要在于利用事件循环的处理能力

`不适合CPU密集型?`

- 通过C++扩展更高效的利用CPU，将V8不能做到性能极致的地方通过C++来实现
- 通过子进程创建常驻的计算进程，通过进程间消息传递结果，将计算和I/O分离，充分利用多CPU